# vless-vpn-server-auto-install

## На данный момент ведется доработка, скрипт не является работоспособным

Этот скрипт был создан для личного использования и распространяется как есть, без гарантий и ответственности, все что вы делаете вы делаете на свой страх и риск.
Скрипт предназначен для автоматической установки и полной настройки VPN сервера для личного использования.
В конечном результате вы получаете сервер:
1. Без лишних открытых портов и лишнего установленного софта, наружу будет торчать только ssh и xray
2. SSH доступом настроенным на максимальную безопасность и доступом по ключу
3. Включенный fail2ban для исключений попыток брутфорса SSH
4. Чистый Xray core без панелей и надстроек
5. Автоматические обновления geo баз, xray, безопастности системы и авто перезагрузкой при необходимости
6. Уведомления в Телеграмм бота о включении сервера, логине по ssh и разлогине, уведомление о потраченном трафике со сбросом раз в месяц, уведомление о обновлении и запуске перезагрузки, уведомления о обнаруженных и забаненых за брутфорс ip адресах

Обязательные требования:
- Свежая установка для избежания конфликтов конфигураций Ubuntu 24.04 и новее.
- Подготовленный в конфигурационном файле - новый пароль, ник для администратора сервера, телеграмм бот token, id кому бот будет слать сообщения, dest сайт под который маскируемся, одно имя для генерации конфигурации впн, количество дней которые действует это имя (0 - бесконечно).

Необязательные требования:
- Ключ Ubuntu pro

Структура проекта:
Все конфигурационные файлы устанавливаемые на систему находятся в cfg/
Все устанавливаемые на систему скрипты находятся в script/, устанавливается в /usr/local/bin/

Установка:
- Скачайте скрипт в любую директорию git clone https://github.com/LonelyMelancholy/vless-vpn-server-auto-install.git
- Заполните конфигурационный файл для автоустановки configuration.cfg, убрав default значения
- Запустите bash pred-install.sh, скрипт проверит правильность заполнения и обновит систему
- Запустите bash install.sh установит все необходимые программы и настройки
- Скопируйте приватный ключ который в конце установки выдаст скрипт и порт подключения, настройте ssh клиент для работы с ним, если у вас несколько ключей ssh-agent использовать нельзя, он перебирает ключи по очереди при подключении и после 3 неправильного ключа вас забанит.

Работа с сервером:
- Генерация ссылок для клиентов
- Добавление нового клиента
- Удаление клиента
- Просмотр сколько времени осталось у клиента и его блок

Автоматические работы:
- Уведомление о трафике за сутки в 1:00
- Обновление Xray каждое первое число месяца в 2:00
- Обновления безопасности системы каждое первое число месяца в 3:00 (с возможной автоматической перезагрузкой)

Места установки
- Скрипты уведомлений /usr/local/bin/telegram
- Скрипты обновлений /usr/local/bin/service
- Логи скриптов уведомлений /var/log/telegram

TO_DO List
- переделать функции что бы лучше логировалось, так как сейчас половина команд не логируется
- добавить что бы в цикле добавлялись юзеры из файла
- проверить как добавляются приват кей дест и шорт ид если там пусто
- - нет уведомлений о ребуте и почему то банит на 10 минут
- - проверить что с ключами, почему меня не пустило по ссш, какие ключи в настройках у ссш основного конфига
- Управление через телеграмм бота
- в уведомлениях о трафике юзеры зделать парсинг имени